# Web サイト公開プラットフォーム 設計書

## 1. はじめに

本文書は、Web サイト公開プラットフォームの設計について記述するものです。

## 2. 機能要件

### 2.1. ユーザー種別と権限

### 2.2. ページ公開機能

#### 2.2.1. HTML/CSS/JS の入力とプレビュー

#### 2.2.2. 公開サブドメインの設定

#### 2.2.3. 公開済みページの管理（一覧、編集、削除）

### 2.3. ユーザー管理機能

#### 2.3.1. ログイン・ログアウト

#### 2.3.2. パスワード再設定

### 2.4. 管理者機能

#### 2.4.1. ユーザー招待

#### 2.4.2. 招待済みユーザー管理

## 3. システム構成

### 3.1. 技術スタック

### 3.2. データベース設計

## 4. 画面設計

### 4.1. 画面一覧

### 4.2. ワイヤーフレーム

### 4.3. 画面遷移図

## 5. セキュリティ要件

(詳細は別紙 `security.md` を参照)

## 6. 開発環境

### 6.1. 必要なツールとバージョン

### 6.2. セットアップ手順の概要

## 7. UI 構成

### 7.1. UI ライブラリ

### 7.2. スタイリング方針

### 7.3. 主要コンポーネント

### 2.1. ユーザー種別と権限

本システムには、以下の 3 つのユーザー種別が存在します。

1.  **未ログインユーザー（ゲスト）**
    - 公開されている Web ページへのアクセス
    - ログインページへのアクセス
2.  **招待ユーザー（一般ユーザー）**
    - 未ログインユーザーの全権限
    - メインページへのアクセス（HTML/CSS/JS の入力とプレビュー、公開サブドメイン設定）
    - 自身が過去に公開したページの管理（一覧表示、編集、削除）
    - 自身のパスワード再設定
3.  **管理者**
    - 招待ユーザーの全権限
    - 管理者用ダッシュボードへのアクセス
      - ユーザー招待機能（メールアドレスと初期パスワードによるユーザー作成、招待メール送信）
      - 招待済みユーザーの一覧表示と管理（アカウント停止など、今回はスコープ外とするが将来的な拡張を考慮）

各ユーザー種別がアクセス可能なページと機能は、認証と認可の仕組みによって制御されます。

### 2.2. ページ公開機能

本システムの中核となる、ユーザーが作成した HTML、CSS、JavaScript を用いて Web ページを公開する機能です。

#### 2.2.1. HTML/CSS/JS の入力とプレビュー

招待ユーザーは、メインページ上で HTML、CSS、JavaScript のコードをそれぞれ専用のテキストエリアに入力できます。入力されたコードは、リアルタイムまたはプレビューボタンのクリックにより、ページ下部や別ウィンドウ（またはモーダル）でプレビュー表示されます。これにより、ユーザーは公開前にデザインや動作を確認できます。

- **HTML 入力エリア**: ユーザーは完全な HTML ドキュメント（`<html>`, `<head>`, `<body>` タグを含む）を入力します。システム側でユーザーの HTML 入力を変更することはありません。利便性のため、基本的な HTML 構造（例: `<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Untitled</title></head><body><!-- Your content here --></body></html>`）をワンクリックで挿入できるテンプレートボタンを提供します。
- **CSS 入力エリア**: 入力された CSS は、ユーザーが HTML 内で `<link>` タグや `<style>` タグを用いて自身で読み込むか、またはシステム側で HTML の `<head>` タグ内に `<style>` タグとして挿入するかを選択できるようにすることを検討します。初期実装では、ユーザーが HTML 内に直接記述、または CSS 入力エリアのものをシステムが `<head>` に挿入する方式とします。
- **JS 入力エリア**: 入力された JavaScript は、ユーザーが HTML 内で `<script>` タグを用いて自身で読み込むか、またはシステム側で HTML の `<body>` タグの末尾に `<script>` タグとして挿入するかを選択できるようにすることを検討します。初期実装では、ユーザーが HTML 内に直接記述、または JS 入力エリアのものをシステムが `<body>` 末尾に挿入する方式とします。
- **プレビュー機能**: ユーザーが入力した HTML、CSS、JS を組み合わせて、実際の表示に近い形でプレビューします。プレビューは同一ページ内、または新しいタブ/ウィンドウで表示することを検討します。
- **入力制限**: 各入力エリアには、悪意のあるコードの挿入を防ぐため、またパフォーマンス上の理由から、一定の文字数制限やファイルサイズ制限（CSS/JS をファイルとして扱う場合）を設けます。初期値として、HTML は 5MB、CSS と JS はそれぞれ 1MB 程度を想定します。

#### 2.2.2. 公開サブドメインの設定

ユーザーは、自身が作成したページを公開する際に、任意のサブドメイン名を指定できます。システムは、指定されたサブドメイン名と、あらかじめ設定されたベースドメインを組み合わせて、一意の URL を生成します（例: `your-input.example.com`）。

- **サブドメイン名の入力**: ユーザーは、公開設定フォームで希望するサブドメイン名を入力します。
- **バリデーション**: 入力されたサブドメイン名は、以下の観点でバリデーションを行います。
  - 使用可能な文字種（英数字、ハイフンなど）
  - 長さ制限
  - 予約語や禁止語句のチェック
  - 既存のサブドメイン名との重複チェック（システム全体で一意である必要があります）
- **ベースドメイン**: システム管理者が設定した固定のドメイン名（例: `*.platform-domain.com`）を使用します。ローカル開発環境では、`localhost` や `lvh.me` などを利用して擬似的なサブドメイン環境を構築します。

#### 2.2.3. 公開済みページの管理（一覧、編集、削除）

招待ユーザーは、自身が過去に公開した Web ページの一覧を管理画面で確認し、編集や削除を行うことができます。

- **一覧表示**: ユーザーが公開したページのリストを表示します。表示項目には、ページタイトル（HTML の`<title>`タグから取得、またはユーザーが別途設定）、公開 URL、作成日時、最終更新日時などを含めます。
- **編集機能**: 一覧から特定のページを選択し、HTML、CSS、JS の内容や公開サブドメイン名を編集できます。編集後、再度プレビューし、変更を保存・公開します。（本タスクでは HTML/CSS/JS の編集機能はスコープ外とし、サブドメイン名の変更やページの公開/非公開切り替え程度を想定します。将来的な拡張としてコード編集機能を追加します。）
- **削除機能**: 公開済みのページを削除します。削除されたページは公開停止となり、URL にアクセスしても表示されなくなります。削除操作は確認ダイアログを表示し、誤操作を防ぎます。

### 2.3. ユーザー管理機能

招待ユーザーがシステムを利用するための基本的な認証機能を提供します。

#### 2.3.1. ログイン・ログアウト

- **ログイン**: 登録済みのユーザーは、メールアドレスとパスワードを用いてシステムにログインできます。ログインに成功すると、セッションが開始され、メインページや過去に公開したページの管理画面など、権限に応じたページへアクセス可能になります。ログイン失敗時には、適切なエラーメッセージを表示します。アカウントロック機能（一定回数失敗で一時的にログイン不可にする）もセキュリティ対策として検討します。
- **ログアウト**: ログイン中のユーザーは、ログアウト機能を利用してセッションを終了できます。ログアウト後は、ログインページにリダイレクトされます。

#### 2.3.2. パスワード再設定

ユーザーがパスワードを忘れた場合に、再設定を行うための機能を提供します。

- **再設定申請**: ログインページの「パスワードをお忘れですか？」リンクなどから、登録済みのメールアドレスを入力します。
- **メール送信**: 入力されたメールアドレスがシステムに登録されていれば、パスワード再設定用のユニークな URL を記載したメールを送信します。この URL には有効期限を設定します。
- **新パスワード設定**: ユーザーがメール内の URL にアクセスすると、新しいパスワードを設定するためのフォームが表示されます。新しいパスワードを入力し、確認用にもう一度入力することで、パスワードが更新されます。
- **セキュリティ**: パスワード再設定トークンの管理や、メール送信処理の安全性に配慮します。

### 2.4. 管理者機能

システムの管理者がユーザー管理やシステム設定を行うための機能です。

#### 2.4.1. ユーザー招待

管理者は、新規ユーザーをシステムに招待できます。

- **招待プロセス**: 管理者は、管理画面から招待したいユーザーのメールアドレスを入力します。システムは、そのメールアドレスに対して、ランダムに生成された初期パスワードとログインページの URL を記載した招待メールを送信します。ユーザーは、その情報を使って初回ログインを行い、その後パスワードを変更することが推奨されます。
  - **代替案**: メールアドレスを入力すると、招待リンク（有効期限付きのユニークなトークンを含む URL）を生成し、管理者がそのリンクを直接ユーザーに伝える、またはシステムからメールで送信する方式も考えられます。ユーザーがリンクにアクセスすると、自身でパスワードを設定してアカウント登録を完了するフローです。今回は、初期パスワード発行方式で進めますが、将来的には招待リンク方式も検討可能です。
- **ユーザー作成**: 管理者がメールアドレスと（必要であれば氏名などの追加情報）を入力し、システムが初期パスワードを自動生成してユーザーアカウントを作成します。

#### 2.4.2. 招待済みユーザー管理

管理者は、システムに登録されているユーザーの一覧を確認し、基本的な管理操作を行えます。

- **ユーザー一覧表示**: 登録されているユーザーのメールアドレス、登録日時、最終ログイン日時などを一覧で表示します。
- **アカウント管理**: 将来的な拡張として、ユーザーアカウントの有効化/無効化（一時停止）、ロール変更、削除などの機能が考えられますが、今回の初期開発スコープでは、一覧表示と、必要に応じて手動でのデータベース操作による対応を想定します。管理画面からの直接的なユーザー編集・削除機能は、今後のタスクとします。

## 3. システム構成

本システムのアーキテクチャと技術要素について記述します。

### 3.1. 技術スタック

本システムは以下の技術スタックで構築されます。

- **バックエンド**: Ruby on Rails
  - Ruby のバージョンは `rbenv` を用いて管理し、プロジェクトで指定された最新安定版を利用します。
  - Rails のバージョンもプロジェクトで指定された最新安定版を利用します。
  - コードフォーマット・Lint: RuboCop
- **フロントエンド**: React + TypeScript
  - Node.js のバージョンは `fnm` を用いて管理し、プロジェクトで指定された LTS 版を利用します。
  - React および TypeScript のバージョンも最新安定版を基本とします。
  - UI フレームワークとして `shadcn/ui` を採用し、スタイリングには `Tailwind CSS` を使用します。
  - 状態管理ライブラリ: Jotai および TanStack Query (旧 React Query) の利用を検討します。
  - コードフォーマット・Lint: Biome
- **データベース**:
  - 開発環境: SQLite3 - Rails のデフォルトであり、手軽に利用開始できるため。
  - 本番環境: PostgreSQL - 高機能かつ堅牢なオープンソース RDBMS であり、Rails との親和性も高いため。
- **認証**: Devise (Rails gem)
  - ユーザー認証（サインアップ、ログイン、ログアウト）、パスワード管理（暗号化、リセット）などの基本的な認証機能を実装するために利用します。
- **開発環境**:
  - OS: Windows 11 + WSL2 (Ubuntu)
  - コードエディタ: Visual Studio Code
  - Ruby バージョン管理: rbenv
  - Node.js バージョン管理: fnm
- **Web サーバー** (本番環境):
  - Puma (Rails デフォルト) または Unicorn などを検討します。
- **リバースプロキシ** (本番環境):
  - Nginx または Apache などを検討し、静的コンテンツの配信、SSL 終端、ロードバランシング（将来的な拡張）などを担当させます。

### 3.2. データベース設計

主要なテーブルとカラムの概要を以下に示します。詳細な ER 図やマイグレーションファイルは別途作成します。

1.  **users (ユーザー)**

    - `id` (PK, UUID or BigInt)
    - `email` (String, Unique, Not Null) - ログイン ID
    - `encrypted_password` (String, Not Null) - Devise によるハッシュ化パスワード
    - `role` (String, Not Null, Default: 'user') - ユーザー種別 ('user', 'admin')
    - `reset_password_token` (String, Unique) - Devise 用
    - `reset_password_sent_at` (Datetime) - Devise 用
    - `remember_created_at` (Datetime) - Devise 用
    - `sign_in_count` (Integer, Default: 0, Not Null) - Devise 用
    - `current_sign_in_at` (Datetime) - Devise 用
    - `last_sign_in_at` (Datetime) - Devise 用
    - `current_sign_in_ip` (String) - Devise 用
    - `last_sign_in_ip` (String) - Devise 用
    - `created_at` (Datetime, Not Null)
    - `updated_at` (Datetime, Not Null)

2.  **sites (公開サイト)**
    - `id` (PK, UUID or BigInt)
    - `user_id` (FK, References users.id, Not Null) - 所有ユーザー
    - `subdomain` (String, Unique, Not Null) - ユーザーが設定するサブドメイン
    - `html_content` (Text) - HTML コード
    - `css_content` (Text) - CSS コード
    - `js_content` (Text) - JavaScript コード
    - `title` (String) - ページのタイトル（HTML から抽出またはユーザー設定）
    - `is_public` (Boolean, Default: true, Not Null) - 公開状態
    - `created_at` (Datetime, Not Null)
    - `updated_at` (Datetime, Not Null)

**補足:**

- `users` テーブルは Devise の標準的なカラムに加えて、本システム独自の `role` カラムを持ちます。
- `sites` テーブルは、ユーザーが作成・公開する Web ページの情報（HTML, CSS, JS コンテンツ、サブドメインなど）を格納します。
- ファイルアップロード機能（画像など）を将来的に追加する場合は、Active Storage を利用し、別途 `active_storage_blobs` および `active_storage_attachments` テーブルが Rails によって自動的に作成・利用されます。今回のスコープでは、HTML/CSS/JS はテキストデータとして DB に保存します。
- サブドメインの一意性を保証するため、`sites` テーブルの `subdomain` カラムにはユニーク制約を付与します。
- 各コンテンツのサイズ制限はアプリケーションレベルで実施します。

## 4. 画面設計

本システムで提供する主要な画面の構成と遷移について記述します。

### 4.1. 画面一覧

1.  **公開ページ (/:subdomain)**: ユーザーが作成・公開した Web ページ。サブドメインでアクセス可能。
2.  **ログインページ (/login)**: ユーザーがメールアドレスとパスワードを入力してログインするためのページ。
3.  **パスワード再設定リクエストページ (/password/new)**: パスワードを忘れたユーザーがメールアドレスを入力し、再設定リンクを要求するためのページ。
4.  **パスワード再設定ページ (/password/edit?token=xxx)**: メールで送られた再設定リンクからアクセスし、新しいパスワードを設定するページ。
5.  **メインページ（ダッシュボード /dashboard)**: ログイン後、招待ユーザーがアクセスするメイン画面。HTML/CSS/JS の入力、プレビュー、公開設定を行う。
6.  **公開済みページ管理ページ (/sites)**: 招待ユーザーが自身で公開したページの一覧を表示し、管理（編集・削除など）を行うページ。
7.  **ページ編集ページ (/sites/:id/edit)**: 既存の公開済みページの内容（HTML/CSS/JS やサブドメイン）を編集するページ。（本タスクではサブドメイン変更や公開/非公開の切り替えを主とし、コード編集は将来対応）
8.  **管理者用ダッシュボード (/admin)**: 管理者がアクセスする画面。ユーザー招待機能など。
9.  **管理者用ユーザー一覧ページ (/admin/users)**: 管理者が招待済みユーザーの一覧を確認するページ。

### 4.2. ワイヤーフレーム（テキストベース）

主要な画面の簡易的なワイヤーフレームを以下に示します。

**1. ログインページ (`/login`)**

```
+---------------------------------------+
| [ロゴ/サイト名]                       |
+---------------------------------------+
| ログイン                              |
|                                       |
| メールアドレス: [___________________]   |
| パスワード:   [___________________]   |
|                                       |
|             [ ログインボタン ]        |
|                                       |
| パスワードをお忘れですか？ (リンク)   |
| アカウントをお持ちでないですか？      |
| (管理者に連絡してください等の案内)    |
+---------------------------------------+
```

**2. メインページ（ダッシュボード `/dashboard`)**

```
+----------------------------------------------------------------------------------------------------+
| [ロゴ/サイト名]                                                     [ユーザー名] [ログアウト]      |
+----------------------------------------------------------------------------------------------------+
| ナビゲーション: [新規作成] [公開済みページ管理] (管理者なら[管理者ダッシュボード])                 |
+----------------------------------------------------------------------------------------------------+
| 新規ページ作成                                                                                     |
+---------------------------------------+------------------------------------------------------------+
| 設定                                  | エディタエリア                                             |
|---------------------------------------|------------------------------------------------------------|
| サブドメイン: [____________].domain.com | HTML                                                       |
|                                       | +--------------------------------------------------------+ |
| ページタイトル(任意): [___________]   | | [ テキストエリア (HTML入力) ]                            | |
|                                       | +--------------------------------------------------------+ |
| [ 公開するボタン ]                    | CSS                                                        |
| [ プレビューボタン ]                  | +--------------------------------------------------------+ |
|                                       | | [ テキストエリア (CSS入力)  ]                            | |
|                                       | +--------------------------------------------------------+ |
|                                       | JS                                                         |
|                                       | +--------------------------------------------------------+ |
|                                       | | [ テキストエリア (JS入力)   ]                            | |
|                                       | +--------------------------------------------------------+ |
+---------------------------------------+------------------------------------------------------------+
| プレビューエリア (ボタンクリックで表示、またはリアルタイム)                                          |
| +------------------------------------------------------------------------------------------------+ |
| |                                                                                                | |
| | (ここにHTML/CSS/JSを適用した結果が表示される)                                                    | |
| |                                                                                                | |
| +------------------------------------------------------------------------------------------------+ |
+----------------------------------------------------------------------------------------------------+
```

**3. 公開済みページ管理ページ (`/sites`)**

```
+----------------------------------------------------------------------------------------------------+
| [ロゴ/サイト名]                                                     [ユーザー名] [ログアウト]      |
+----------------------------------------------------------------------------------------------------+
| ナビゲーション: [新規作成] [公開済みページ管理] (管理者なら[管理者ダッシュボード])                 |
+----------------------------------------------------------------------------------------------------+
| 公開済みページ一覧                                                                                 |
+----------------------------------------------------------------------------------------------------+
| | ページタイトル  | 公開URL                     | 作成日時        | アクション                | |
| |-----------------|-----------------------------|-----------------|---------------------------| |
| | マイページ1     | mypage1.domain.com          | 2025/05/06      | [編集(リンク)] [削除(ボタン)] | |
| | プロフィール    | profile.domain.com          | 2025/05/05      | [編集(リンク)] [削除(ボタン)] | |
| | ...             | ...                         | ...             | ...                       | |
+----------------------------------------------------------------------------------------------------+
| [ 新規ページ作成ボタン ]                                                                           |
+----------------------------------------------------------------------------------------------------+
```

**4. 管理者用ダッシュボード (`/admin`)**

```
+----------------------------------------------------------------------------------------------------+
| [ロゴ/サイト名]                                                     [管理者名] [ログアウト]      |
+----------------------------------------------------------------------------------------------------+
| ナビゲーション: [新規作成] [公開済みページ管理] [管理者ダッシュボード]                             |
+----------------------------------------------------------------------------------------------------+
| 管理者メニュー                                                                                     |
| - [ユーザー招待] (リンク)                                                                          |
| - [ユーザー一覧] (リンク)                                                                          |
+----------------------------------------------------------------------------------------------------+
| ユーザー招待フォーム (ユーザー招待選択時)                                                          |
| メールアドレス: [___________________]                                                              |
|                                                                                                    |
|             [ 招待メール送信ボタン ]                                                               |
+----------------------------------------------------------------------------------------------------+
```

### 4.3. 画面遷移図（テキストベース）

```
ゲスト:
  - /login (ログインページ)
    -> (成功) /dashboard (メインページ)
    -> (失敗) /login (エラー表示)
    -> /password/new (パスワード再設定リクエストページ)
  - /password/new
    -> (メール送信後) /login (メッセージ表示)
  - /password/edit?token=xxx (パスワード再設定ページ)
    -> (成功) /login (メッセージ表示)
    -> (失敗) /password/edit?token=xxx (エラー表示)
  - /:subdomain (公開ページ)

招待ユーザー (ログイン後):
  - /dashboard (メインページ)
    -> (公開ボタン) /sites (公開済みページ管理へリダイレクト、または成功メッセージ)
    -> /sites (公開済みページ管理ページ)
    -> /admin (管理者のみ、管理者用ダッシュボードへ)
    -> /logout -> /login
  - /sites (公開済みページ管理ページ)
    -> /sites/:id/edit (ページ編集ページ)
    -> (削除ボタン) /sites (一覧更新)
    -> /dashboard (新規作成へ)
  - /sites/:id/edit (ページ編集ページ)
    -> (更新ボタン) /sites (一覧へリダイレクト、または成功メッセージ)

管理者 (ログイン後):
  - 上記招待ユーザーの遷移に加えて:
  - /admin (管理者用ダッシュボード)
    -> /admin/users (管理者用ユーザー一覧ページ)
    -> (ユーザー招待フォームから送信) /admin (成功メッセージ、またはユーザー一覧へ)
  - /admin/users (管理者用ユーザー一覧ページ)
    -> (将来的にユーザー編集・削除など)
```

## 6. 開発環境

本システムの開発を効率的かつ円滑に進めるための環境について記述します。

### 6.1. 必要なツールとバージョン

開発者は以下のツールをセットアップする必要があります。バージョンは指定がない限り、安定版の最新を推奨します。

- **OS**: Windows 11
  - **WSL2 (Windows Subsystem for Linux 2)**: Linux 開発環境を Windows 上で利用するために必須。
    - **ディストリビューション**: Ubuntu (最新 LTS 版を推奨)
- **コードエディタ**: Visual Studio Code (VS Code)
  - **推奨拡張機能**:
    - Remote - WSL: WSL 内のプロジェクトを直接 VS Code で開くため。
    - Ruby (Shopify 版または後継の Ruby LSP): Ruby のコード補完、デバッグ、Lint 連携。
    - rubocop (拡張機能): RuboCop との連携。
    - ESLint: JavaScript/TypeScript の Lint。
    - Prettier - Code formatter: コードフォーマット (Biome と競合しないように設定、または Biome 拡張機能を利用)。
    - Biome: Biome CLI との連携 (フォーマット、Lint)。
    - GitLens — Git supercharged: Git の履歴確認などを強化。
    - Docker (もしコンテナ化する場合): Docker コンテナの管理。
    - PostgreSQL (もしローカルで PostgreSQL を直接動かす場合): PostgreSQL クライアント機能。
- **バージョン管理システム**: Git
- **Ruby 環境**:
  - **rbenv**: Ruby のバージョン管理ツール。
    - **ruby-build**: rbenv のプラグインで、Ruby のインストールを容易にする。
  - **Ruby**: プロジェクトで指定するバージョン (例: 3.x.x)。
  - **Bundler**: Ruby の gem パッケージ管理ツール。
  - **Rails**: プロジェクトで指定するバージョン (例: 7.x.x)。
- **Node.js 環境**:
  - **fnm (Fast Node Manager)**: Node.js のバージョン管理ツール。
  - **Node.js**: プロジェクトで指定する LTS バージョン (例: 20.x.x)。
  - **npm** または **yarn**: Node.js のパッケージ管理ツール (プロジェクトで統一)。
- **データベース**:
  - **SQLite3**: 開発環境でのデフォルトデータベース。Rails インストール時に通常含まれる。
  - **PostgreSQL**: 本番環境で使用。開発環境でも Docker 等で同バージョンを起動してテストすることが望ましい。
    - **psql**: PostgreSQL のコマンドラインクライアント。
- **Web ブラウザ**: Google Chrome, Firefox など、開発者ツールが充実しているモダンブラウザ。
- **ターミナル**: Windows Terminal や VS Code 内蔵ターミナルなど。

### 6.2. セットアップ手順の概要

1.  **WSL2 と Ubuntu のインストール**: Windows の機能から WSL を有効化し、Microsoft Store から Ubuntu をインストール。
2.  **基本ツールのインストール (Ubuntu 内)**: `sudo apt update && sudo apt upgrade` 後、`git`, `curl`, `build-essential`, `libpq-dev` (PostgreSQL 連携用) などをインストール。
3.  **rbenv と Ruby のインストール**: rbenv をインストールし、指定バージョンの Ruby をインストール、グローバルまたはプロジェクトローカルで設定。
4.  **Bundler のインストール**: `gem install bundler`。
5.  **fnm と Node.js のインストール**: fnm をインストールし、指定バージョンの Node.js をインストール、グローバルまたはプロジェクトローカルで設定。
6.  **Biome のインストール**: プロジェクトの依存関係として、またはグローバルに Biome CLI をインストール。
7.  **PostgreSQL の準備**: Docker で PostgreSQL コンテナを起動するか、ローカルに PostgreSQL をインストール・設定。
8.  **プロジェクトのクローン**: Git リポジトリからプロジェクトをクローン。
9.  **依存関係のインストール**:
    - バックエンド: `bundle install`
    - フロントエンド: `npm install` (または `yarn install`)
10. **データベースのセットアップ**: `rails db:create db:migrate db:seed` (必要に応じて)。
11. **VS Code のセットアップ**: 推奨拡張機能をインストールし、WSL 内のプロジェクトを開く。
12. **開発サーバーの起動**:
    - バックエンド(Rails): `rails s`
    - フロントエンド(React): `npm run dev` (または `yarn dev`)

この手順は一般的なものであり、プロジェクトの進捗や詳細な決定に応じて調整される可能性があります。

## 7. UI 構成

本システムのユーザーインターフェース（UI）に関する設計方針と使用する要素について記述します。

### 7.1. UI ライブラリ

- **shadcn/ui**: フロントエンドの UI コンポーネントライブラリとして `shadcn/ui` を採用します。これは、Tailwind CSS をベースにしたアクセシビリティの高いコンポーネント群を提供し、プロジェクトに直接コンポーネントのコードを取り込む形式のため、カスタマイズ性に優れています。
  - 利用するコンポーネントは、設計書内のワイヤーフレームや機能要件に基づき、開発を進めながら適宜選定・導入します。

### 7.2. スタイリング方針

- **Tailwind CSS**: スタイリングには `Tailwind CSS` をメインで使用します。`shadcn/ui` が Tailwind CSS を前提としているため、ユーティリティファーストのアプローチで効率的に UI を構築します。
- **デザインの前提**: 本システムはデスクトップ環境での利用を主要なターゲットとします。レスポンシブデザインへの対応は初期スコープでは必須とせず、必要に応じて将来的な改善項目として検討します。
- **カスタム CSS**: Tailwind CSS で表現が難しい、または複雑になるスタイルについては、限定的にカスタム CSS ファイルを作成して対応することも検討します。その場合も、Tailwind CSS の設計思想と競合しないよう注意します。

### 7.3. 主要コンポーネント

画面設計で示したワイヤーフレームや機能要件に基づき、以下のような `shadcn/ui` のコンポーネント、またはそれに準ずるカスタムコンポーネントの利用を想定しています。具体的なコンポーネント名は `shadcn/ui` のドキュメントを参照し、開発時に選定します。

- **ナビゲーション**: `Navigation Menu` やカスタムのヘッダーコンポーネント
- **ボタン**: `Button` (プライマリ、セカンダリ、デストラクティブなど各種バリアント)
- **フォーム要素**:
  - `Input`: テキスト入力
  - `Textarea`: 複数行テキスト入力 (HTML/CSS/JS コード入力用)
  - `Label`: フォーム要素のラベル
  - `Checkbox`, `Radio Group`: 選択肢
  - `Select`: ドロップダウン選択
- **ダイアログ・モーダル**: `Dialog`, `Alert Dialog` (確認メッセージ、プレビュー表示など)
- **テーブル**: `Table` (公開済みページ一覧、ユーザー一覧など)
- **カード**: `Card` (ダッシュボードのセクション表示など)
- **トースト・通知**: `Toast` (操作結果のフィードバック)
- **アコーディオン**: `Accordion` (FAQ や設定項目など、折りたたみ可能なコンテンツ表示)
- **ツールチップ**: `Tooltip` (アイコンやボタンに対する補助説明)
- **アバター**: `Avatar` (ユーザー表示用)

これらのコンポーネントを組み合わせ、一貫性のあるユーザーフレンドリーなインターフェースを目指します。UI デザインの詳細は、開発を進めながらプロトタイプを作成し、必要に応じて調整します。
